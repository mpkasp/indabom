{% if user.is_superuser and user.is_authenticated %}
    <li><a title="IndaBOM | Admin" href="/admin/">Admin</a></li>
{% endif %}

{% if user.is_authenticated %}
    <li><a title="IndaBOM | Feedback" href="https://forms.gle/4CUQuBcfBJ4eGXDW8" target="_blank">Feedback</a></li>
    {% if user.bom_profile.is_organization_owner %}
        {% if user.bom_profile.organization.subscription != 'F' %}
{#            <li><a title="IndaBOM | Billing" href="{% url 'stripe-manage' %}" target="_blank">Billing</a></li>#}
        {% else %}
{#            <li><a title="IndaBOM | Billing" href="{% url 'views.Checkout.name' %}" target="_blank">Billing</a></li>#}
        {% endif %}
    {% endif %}
{% endif %}
{% if user.is_authenticated %}
    <li>
        <form class="logout-form" method="post" action="{% url 'logout' %}" style="display: none;">
            {% csrf_token %}
        </form>
        <a href="#" class="logout-link" title="IndaBOM | Log Out">
            Logout
        </a>
    </li>
{% endif %}

{% if not user.is_authenticated %}
    <li {% if name == 'pricing' %}class="active"{% endif %}><a title="IndaBOM | Pricing" href="{% url 'pricing' %}">Pricing</a>
    </li>
    <li {% if name == 'product' %}class="active"{% endif %}><a title="IndaBOM | Product" href="{% url 'product' %}">Product</a>
    </li>
    <li {% if name == 'about' %}class="active"{% endif %}><a title="IndaBOM | About" href="{% url 'about' %}">About</a></li>
    <li {% if name == 'signup' %}class="active"{% endif %}><a title="Sign Up" href="{% url 'signup' %}">Sign Up</a></li>
    <li {% if name == 'login' %}class="active"{% endif %}><a title="IndaBOM | Log In" href="{% url 'login' %}">Login</a></li>
{% endif %}

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Bind to ALL logout links (desktop nav and mobile sidenav) to avoid duplicate-id issues
  var links = document.querySelectorAll('.logout-link');
  if (links && links.length) {
    links.forEach(function(link) {
      // Prevent double-binding when this template is included multiple times
      if (link.dataset.bound === '1') { return; }
      link.dataset.bound = '1';
      link.addEventListener('click', function(event) {
        event.preventDefault();
        var container = link.closest('li') || document;
        var form = container.querySelector('.logout-form') || document.querySelector('.logout-form');
        if (form) {
          form.submit();
        }
      });
    });
  }
});
</script>